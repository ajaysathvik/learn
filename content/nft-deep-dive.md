---
title: NFT Deep Dive
geekdocBreadcrumb: false
aliases: ["/data", "/about/data", "/contributing/data"]
---

This section explains how to initiate an NFT transaction. A good understanding of [NFT](https://learn.rubix.net/nft/) and [RAC](https://learn.rubix.net/rac/) is expected before diving deep into this section.

### 1. Enabling NFT
For an existing or new user to be able to create and transfer NFTs they should first see if the Rubix node is enabled/compatible for NFT transactions.
To enable NFT wallet for a new or existing user of Rubix, execute the below curl command:

```
$ curl localhost:1898/enableNFT
```

### 2. Creating Private Key - Public Key pair
Once the NFT wallet has been enabled, next step is to create a Private Key-Public Key pair ( different from Private - Public Share). For the ECDSA key pair creations, execute the below command:

```
$ curl --header "Content-Type: application/json" --request POST 'http://localhost:1898/generateEcDsaKeys' --data '{ "pvtKeyPass" : "<password>" , "returnKey" : }'
```

In the above curl command, the required parameters are as follows:

| Parameter | Description |
| ---------------------------------------- | ------ | 
| pvtKeyPass | Value of password supplied by the user to create their ECDSA Key pair|
| returnKey | Flag value to determine if keys should be saved in node or returned as string. This flag when set to ‘0’ creates the ECDSA Key pair and the ipfs hash of the generated  public key and saves then in the path Rubix/DATA. When set to ‘1’, it creates the ECDSA Key pair and the ipfs hash of the generated  public key and returns the value as string (functionality in case of multiple users allocated to single VM)|

### 3. Minting an NFT token
Once the ECDSA keys are generated it is time to execute the command to mint NFTs for the particular asset/assets. Now to mint an NFT token for any asset that user might have, the below curl script has to be executed which takes in certain parameters.

```
$ curl --location --request POST 'localhost:1898/generateRac' --header 'Content-Type: application/json' --data '{ "type": ,"creatorPubKeyIpfsHash": "","totalSupply": , "contentHash":"", "url": "", "pvtKeyPass": "", "pvtKey": "", "creatorInput": { }}'
```

In the above curl command, the required parameters are as follows:
| Parameter | Description |
| ---------------------------------------- | ------ | 
| type | Type of token being generated. Since in this case NFT the value of type is 1 |
| creatorPubKeyIpfsHash | This is the PublicKeyIpfsHash of the person generating the NFT token. The value can be found in the path Rubix/DATA. If the field is left blank then it will be fetched from the corresponding path. Else the value should be passed. |
| totalSupply | It is the total number of unique NFT tokens being created for the asset. |
| contentHash | It is a simple hash generated from the asset using MD5. |
| url | This is the field where links to the asset can be shared. The field is optional and the usage is dependent on the NFT creator. |
| pvtKeyPass | This field is to provide the password of the private key that the user provided to generate the same. |
| pvtKey | This field is used to provide the private key of the NFT creator. The field can be left blank if the ECDSA keys were generated using retKey flag value as 0, else the private key should be provided here. |
| creatorInput | This field takes a JSON object as input. The Object can have any number of fields with data ranging from NFT details and attributes to creator details and description. |


### 4. Creating NFT Sales Contract
Once the NFT tokens are generated the next stage is where a sale contract has to be generated by the creator (In case of freshly minted NFT) / current owner here known as seller of the NFT. This sale contract is created to link the NFT token and its value in RBT tokens so that during an NFT transaction the txn can be validated in the Rubix blockchain by its own validators.

To create an NFT sale contract the below command should be executed along with a few parameters:

```
$ curl --header "Content-Type: application/json" --request POST http://localhost:1898/createNftSaleContract --data '{"sellerDid" : "","nftToken" : "", "amount":, "pvtKeyPass" : "","pvtKey":""}'
```

In the above curl command, the required parameters are as follows:

| Parameter | Description |
| ---------------------------------------- | ------ | 
| sellerDid | It is the DID of the creator(for freshly minted NFT token) or DID of the current owner of the NFT. |
| nftToken | It is the NFT token itself for which the contract is being created. |
| amount | The field is the value of NFT in RBT. |
| pvtKeyPass | This field is to provide the password of the private key that the user provided to generate the same. |
| pvtKey | This field is used to provide the private key of the NFT creator. The field can be left blank if the ECDSA keys were generated using retKey flag value as 0, else the private key should be provided here.


### 5. Initiating NFT transaction

Rubix Blockchain Platform offers both Peer-to-Peer transfer of NFTs and transfer of NFT's in marketplaces. Below given are the API endpoints and their parameter list for each type of NFT transfer.

After creation of a sale contract, an NFT transaction can be initiated. The NFT transaction is being initiated from the NFT Buyer node who also has the corresponding RBT for the NFT. 
Below given command is the API to initiate an NFT transaction, which needs to be executed from the NFT Buyer Node:

- API used by Marketplace to transfer/transact NFT :

```
$ curl --header "Content-Type: application/json" --request POST http://localhost:1898/initiateNftTransfer --data '{ "sellerDid": "", "nftToken": "", "comment":"", "type":2, "sellerPubKeyIpfsHash" : "","saleContractIpfsHash":"", "buyerPubKeyIpfsHash" : "", "amount":,"p2pFlag" : 0, "pvtKey" : "<Buyer Private Key Here>", "pvtKeyPass":"<Buyer Private Key Password Here>"}'
```
In the above curl command, the required parameters are as follows:

| Parameter | Description |
| ---------------------------------------- | ------ | 
| sellerDid | It is the DID of the creator (for freshly minted NFT token) or DID of the current owner of the NFT.|
| nftToken | It is the NFT token itself for which the contract is being created.|
| amount | The field is the value of NFT in RBT. |
| type | This value of this field is used to select the quorum type. Value 1 for open network  and 2 for subnet (predefined quorum). |
| comment | Any comment to identify the transaction. |
| sellerPubKeyIpfsHash | This is the PublicKeyIpfsHash of the person transfering the NFT token. The value can be found in the path Rubix/DATA. |
| saleContractIpfsHash | This is the hash of the sale contract created in the previous step which links the NFT value to RBT. |
| sellerPubKeyIpfsHash | This is the PublicKeyIpfsHash of the person receiving the NFT token. The value can be found in the path Rubix/DATA. |
| p2pFlag | Integer value (0/1) that denotes if the transfer is P2P / C2W. Flag value 0 denotes transfer is C2W. Flag value 1 denotes transfer is P2P. |
| pvtKey | This is the private key of the NFT buyer. |
| pvtKeyPass | This is the password for the private key of the NFT buyer. |


- API used to initiate a Peer-to-Peer transfer of NFT:

```
$ curl --header "Content-Type: application/json" --request POST http://localhost:1898/initiateNftTransfer --data '{ "sellerDid": "", "nftToken": "", "comment":"", "type":2,"p2pFlag":1}'
```

In the above curl command, the required parameters are as follows:

| Parameter | Description |
| ---------------------------------------- | ------ | 
| sellerDid | It is the DID of the creator (for freshly minted NFT token) or DID of the current owner of the NFT.|
| nftToken | It is the NFT token itself for which the contract is being created.|
| type | This value of this field is used to select the quorum type. Value 1 for open network  and 2 for subnet (predefined quorum). |
| comment | Any comment to identify the transaction. |
| p2pFlag | Integer value (0/1) that denotes if the transfer is P2P / C2W. Flag value 0 denotes transfer is C2W. Flag value 1 denotes transfer is P2P. |

In this way, an NFT transaction can be initiated.

If you have questions or feedback, please DM us at [@rubixchain](http://twitter.com/rubixChain).
 <!--
<br>

{{< hint info >}}

### What happens when the mining level upgrades?

Credits required to mine a RBT doubles every time the mining level increases. For example, if a node requires 32 credits to mine a RBT in level 3, then the next level requires 64 credits to mine a RBT in level 4. Hence it is reccomended to mine RBT as soon as the required credits are accumulated.

{{< expand "How to know the current level?" >}}

**Oracle:**

- Network is currently mining in `level 4` - reached on `5 th march 2022`

{{< / expand >}}
{{< / hint >}}
 -->